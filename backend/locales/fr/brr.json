{
    "title": "Sauvegarde, Restauration et Récupération sur Linux",
    "date": "17/03/2025",
    "content": "<p>Les données sont l’un des actifs les plus précieux pour les particuliers et les entreprises.<br>Perdre des données critiques en raison de pannes système, de cyberattaques ou de suppressions accidentelles peut avoir de graves conséquences.<br>C’est pourquoi il est essentiel de comprendre les processus de sauvegarde, de restauration et de récupération afin de protéger les données et d’assurer la continuité des activités.<br>Bien que ces termes soient souvent utilisés de manière interchangeable, ils remplissent des fonctions distinctes dans la gestion des données.<br>Dans cet article, vous allez explorer les différences entre ces trois processus et l’importance de chacun d’eux.</p><h2>Sauvegarde : La Première Ligne De Défense</h2><p>La sauvegarde est le processus de création de copies de données afin de les protéger contre la perte ou la corruption.<br>Les sauvegardes garantissent qu'en cas de problème, vous disposez d'une copie accessible de vos données, stockée en toute sécurité.<br><br>Deux exemples de création de sauvegarde sans et avec chiffrement: </p><pre><code><span>$ tar -czvf my_backup_$(date +%F_%H-%M-%S) /home/user/documents</span><br><span>$ tar -czvf - /home/user/documents | gpg --symmetric --cipher-algo AES256 -o my_backup_$(date +%F_%H-%M-%S).tar.gz.gpg</span></code></pre><h2>Restauration : Récupérer les données perdues</h2><p>La restauration est le processus de récupération des données de sauvegarde et de les rendre à nouveau disponibles pour l'utilisation.<br>C'est l'action entreprise lorsque des données ont été perdues, corrompues ou supprimées par accident.<br><br>Si vous voulez déchiffrer et extraire votre sauvegarde précédente, voici comment procéder: </p><pre><code><span>$ gpg --output backup_2025-02-18_15-45-00.tar.gz --decrypt backup_2025-02-18_15-45-00.tar.gz.gpg</span><br><span>$ tar -xzvf backup_2025-02-18_15-45-00.tar.gz</span></code></pre><h2>Récupération : Ramener les systèmes à leur fonctionnement normal</h2><p>La récupération va au-delà de la simple restauration des fichiers ; elle consiste à remettre un système ou un environnement entier en état de fonctionnement après une défaillance majeure, telle qu'une cyberattaque, une panne matérielle ou une catastrophe. <br><br>Supposons que votre système ait planté et que vous disposez d'une sauvegarde complète de votre système appelée <code>full_system_backup_2025-02-18_10-30-25.tar.gz.gpg</code>, située sur un média externe <code>/mnt/backup</code>.<br>Voici comment procéder étape par étape: </p><br><h3>Étape 1 : Démarrer à partir d'un Live CD/USB</h3><p>Vous devez démarrer dans un environnement Linux live, car cela vous permettra de monter votre disque sans qu'il soit utilisé, assurant ainsi une récupération propre sans conflits.<br><a href=\"/blog/bootable-usb\"> Voici comment créer un live USB Linux</a></p><br><h3>Étape 2 : Monter les systèmes de fichiers</h3><p>Une fois démarré, vous ouvrez un terminal et montez les partitions du système cible (là où vous voulez récupérer votre sauvegarde).<br>La commande <code>lsblk</code> va vous permettre de trouver le disque où Linux était installé (nous allons supposer que votre système de fichiers racine soit <code>/dev/sda1</code>): </p><pre><code>$ sudo mount /dev/sda1 /mnt</code></pre><p>Si les partitions <code>/home</code> et <code>/boot</code> existent, montez-les également: </p><pre><code><span>$ sudo mkdir -p /mnt/home && sudo mount /dev/sda2 /mnt/home</span><br><span>$ sudo mkdir -p /mnt/boot && sudo mount /dev/sda3 /mnt/boot</span></code></pre><p>Vous devez monter votre Live CD/USB afin de rendre accessible votre fichier de sauvegarde: </p><pre><code><span>$ sudo mount /dev/sdb1 /mnt/backup # Remplacez /dev/sdb1 par la partition correspondante à votre CD/USB.</span></code></pre><br><h3>Étape 3 : Déchiffrer la sauvegarde (si elle est chiffrée)</h3><p>Rappelez-vous, votre sauvegarde se nomme <code>full_system_backup_2025-02-18_10-30-25.tar.gz.gpg</code> et elle est chiffrée.<br>Voici comment la déchiffrer: </p><pre><code><span>$ gpg --output /mnt/backup/full_system_backup_2025-02-18_10-30-25.tar.gz --decrypt /mnt/backup/full_system_backup_2025-02-18_10-30-25.tar.gz.gpg</span></code></pre><p>Il vous sera demandé de saisir le mot de passe que vous avez utilisé lorsque vous aviez fait votre sauvegarde.</p><h3>Étape 4 : Restaurer la sauvegarde du système</h3><p>Une fois la sauvegarde déchiffrée (ou si elle est déjà au format .tar.gz), vous pouvez la restaurer en utilisant la commande <code>tar</code>.<br>Utilisez <code>tar</code> avec l'option <code>--exclude</code> pour éviter d'écraser vos points de montage actuels tels que <code>/mnt</code>, <code>/proc</code>, <code>/sys</code> ou <code>/dev</code>.<br>Voici comment procéder: </p><pre><code><span>$ sudo tar -xzpf /mnt/backup/full_system_backup_2025-02-18_10-30-25.tar.gz -C /mnt --exclude=/mnt --exclude=/proc --exclude=/sys --exclude=/dev</span></code></pre><h4>Explication:</h4><ul class=\"disc-list\"><li><code>-x</code> - Extraire les fichiers.</li><li><code>-z</code> - Décompresse le fichier <code>.tar.gz</code>.</li><li><code>-p</code> - Préserve les permissions.</li><li><code>-f /mnt/backup/full_system_backup_2025-02-18_10-30-25.tar.gz</code> - Le fichier de sauvegarde à partir duquel restaurer.</li><li><code>-C /mnt</code> - Spécifie le répertoire de destination (ici, la racine de votre système montée sur /mnt)..</li><li><code>--exclude=/mnt --exclude=/proc --exclude=/sys --exclude=/dev</code> - Empêche l'écrasement des répertoires système ou des fichiers spéciaux qui ne doivent pas être restaurés à partir de la sauvegarde.</li></ul><br><h3>Étape 5 : Restaurer le Bootloader (si nécessaire)</h3><p>Si vous avez restauré le système sur un nouveau disque, vous devrez peut-être restaurer le bootloader (GRUB) afin de pouvoir démarrer sur votre système.<br>Voici comment réinstaller GRUB (en supposant que la partition racine soit toujours /dev/sda1): </p><pre><code><span>$ sudo mount --bind /dev /mnt/dev</span><br><span>$ sudo mount --bind /proc /mnt/proc</span><br><span>$ sudo mount --bind /sys /mnt/sys</span><br><span>$ sudo chroot /mnt</span><br><span>$ grub-install /dev/sda # Installe GRUB dans le MBR du disque</span><br><span>$ update-grub # Mets à jour la configuration du bootloader GRUB</span><br><span>$ exit</span></code></pre></p><br><h3>Étape 6 : Redémarrer le système</h3><p>Après avoir récupéré le système et installé le bootloader, vous devriez pouvoir redémarrer sur votre système récupéré.<br>Mais d'abord, vous devez démonter toutes les partitions: </p><pre><code><span>$ sudo umount /mnt/boot /mnt/home /mnt/dev /mnt/proc /mnt/sys /mnt/backup /mnt</span></code></pre><p>Ensuite, vous pouvez éjecter votre Live CD/USB: </p><pre><code><span>$ sudo eject /dev/sdb # Remplacez /dev/sdb par votre périphérique CD/USB correspondant</span></code></pre><p>Maintenant, vous pouvez retirer physiquement votre Live CD/USB et redémarrer le système: </p><pre><code><span>$ sudo reboot</span></code></pre></p><br><h3>Étape 7 : Vérifier la récupération</h3><p>Après avoir redémarré, vous pouvez vérifier si tout a été restauré: </p><pre><code><span>$ ls /home</span><br><span>$ df -h</span></code></pre><p>Félicitations ! Vous avez réussi à récupérer votre système Linux !</p><h2>Conclusion</h2><p>Comprendre les différences entre la sauvegarde, la restauration et la récupération aide les organisations à mettre en place des stratégies efficaces de protection des données.<br>En veillant à ce que les sauvegardes soient fiables, les restaurations testées et les plans de récupération en place, les entreprises peuvent minimiser les temps d'arrêt et la perte de données face à des perturbations inattendues.</p>",
    "conclusion": "<p>Votre entreprise dispose-t-elle d'une stratégie solide de sauvegarde, de restauration et de récupération ?<br>Si ce n'est pas le cas, parlons-en d'en mettre une en place !</p>"
}